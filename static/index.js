let data = {
  1: {
      "title": "Java Beginners Tutorial",
      "length": "2:31:47",
      "author": "Programming With Mosh",
      "description": "Java tutorial for beginners - Learn Java, the langauge behind millions of apps and websites",
      "url": "https://www.youtube.com/watch?v=eIrMbAQSU34",
      "thumbnail": "thumbnail1.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    2: {
      "title": "Crash Course on Java",
      "length": "00:13:59",
      "author": "Alex Lee",
      "description": "Learn Java in 14 Minutes (seriously)",
      "url": "https://www.youtube.com/watch?v=RRubcjpTkks",
      "thumbnail": "thumbnail2.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    3: {
      "title": "Comprehensive Java Guide",
      "length": "69 videos",
      "author": "Telusko",
      "description": "Java tutorial for beginners and absolute beginners.",
      "url": "https://www.youtube.com/playlist?list=PLsyeobzWxl7pFZoGT1NbZJpywedeyzyaf",
      "thumbnail": "thumbnail3.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    4: {
      "title": "C++ Crash Course",
      "length": "00:26:29",
      "author": "Simplilearn",
      "description": "C++ Basics For Beginners | Learn C++ Programming | C++ Tutorial For Beginners | Simplilearn",
      "url": "https://www.youtube.com/watch?v=McojvctVsUs",
      "thumbnail": "thumbnail4.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    5: {
      "title": "Beginners' Tutorial for C++",
      "length": "2:22:51",
      "author": "Derek Banas",
      "description": "A 1,000 page book on C++ condensed down to a 2 hour video.",
      "url": "https://www.youtube.com/watch?v=6y0bp-mnYU0",
      "thumbnail": "thumbnail5.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    6: {
      "title": "Comprehensive C++ Guide",
      "length": "10:28:14",
      "author": "Caleb Curry",
      "description": "C++ Programming All-in-One Tutorial Series (10 HOURS!)",
      "url": "https://www.youtube.com/watch?v=_bYFu9mBnr4",
      "thumbnail": "thumbnail6.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    7: {
      "title": "1hr Python Crash Course",
      "length": "1:00:05",
      "author": "Programming with Mosh",
      "description": "Python for Beginners - Learn Python in 1 Hour",
      "url": "https://www.youtube.com/watch?v=kqtD5dpn9C8",
      "thumbnail": "thumbnail7.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    8: {
      "title": "Beginner Python Guide",
      "length": "4:26:51",
      "author": "freeCodeCamp.org",
      "description": "Learn Python - Full Course for Beginners [Tutorial]",
      "url": "https://www.youtube.com/watch?v=rfscVS0vtbw",
      "thumbnail": "thumbnail8.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    9: {
      "title": "Full Python Course",
      "length": "12:00:00",
      "author": "Bro Code",
      "description": "Python tutorial for beginners full course #python #tutorial #beginners",
      "url": "https://www.youtube.com/watch?v=XKHEtdqhLK8",
      "thumbnail": "thumbnail9.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    10: {
      "title": "15 Minute SQL Rundown",
      "length": "00:17:39",
      "author": "LearnBI.online",
      "description": "Learn Basic SQL in 15 Minutes | Business Intelligence For Beginners | SQL Tutorial For Beginners",
      "url": "https://www.youtube.com/watch?v=kbKty5ZVKMY",
      "thumbnail": "thumbnail10.jpg",
      "likes": 0,
      "dislikes": 0,    
    },
    11: {
      "title": "Beginner SQL Rundown",
      "length": "1:02:22",
      "author": "Joey Blue",
      "description": "Learn SQL in 1 Hour - SQL Basics for Beginners",
      "url": "https://www.youtube.com/watch?v=9Pzj7Aj25lw",
      "thumbnail": "thumbnail11.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    12: {
      "title": "Full SQL Course",
      "length": "8:02:35",
      "author": "Simplilearn",
      "description": "SQL Full Course | SQL Tutorial For Beginners | Learn SQL In 8 Hours | SQL Training | Simplilearn",
      "url": "https://www.youtube.com/watch?v=AA7i2GcTGwU",
      "thumbnail": "thumbnail12.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    13: {
      "title": "HTML Quick Guide",
      "length": "1:09:33",
      "author": "Programming with Mosh",
      "description": "HTML Tutorial for Beginners: HTML Crash Course",
      "url": "https://www.youtube.com/watch?v=qz0aGYrrlhU",
      "thumbnail": "thumbnail13.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    14: {
      "title": "CSS Full Course",
      "length": "6:18:37",
      "author": "freeCodeCamp.org",
      "description": "CSS Tutorial - Zero to Hero (Complete Course)",
      "url": "https://www.youtube.com/watch?v=1Rs2ND1ryYc",
      "thumbnail": "thumbnail14.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    15: {
      "title": "Full HTML Course",
      "length": "4:07:29",
      "author": "freeCodeCamp.org",
      "description": "Learn HTML â€“ Full Tutorial for Beginners (2022)",
      "url": "https://www.youtube.com/watch?v=kUMe1FH4CHE",
      "thumbnail": "thumbnail15.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    16: {
      "title": "JavaScript for Beginners",
      "length": "1:40:29",
      "author": "Traversy Media",
      "description": "In this crash course we will go over the fundamentals of JavaScript including more modern syntax like classes, arrow functions, etc.",
      "url": "https://www.youtube.com/watch?v=hdI2bqOjy3c",
      "thumbnail": "thumbnail16.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    17: {
      "title": "JavaScript in 5 Minutes",
      "length": "00:05:14",
      "author": "Aaron Jack",
      "description": "Learn the most important parts of 2020 Javascript in just 5 minutes",
      "url": "https://www.youtube.com/watch?v=c-I5S_zTwAc",
      "thumbnail": "thumbnail17.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    18: {
      "title": "Full Javascript Course",
      "length": "7:57:27",
      "author": "Clever Programmer",
      "description": "JavaScript Tutorial for Beginners - Full Course in 8 Hours [2020]",
      "url": "https://www.youtube.com/watch?v=Qqx_wzMmFeA",
      "thumbnail": "thumbnail18.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    19: {
      "title": "What is an API?",
      "length": "00:07:12",
      "author": "CodeWithChris",
      "description": "Discover what is an API and how you can use one to perform powerful integrations with other systems.",
      "url": "https://www.youtube.com/watch?v=Yzx7ihtCGBs",
      "thumbnail": "thumbnail19.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    20: {
      "title": "Beginner API Course",
      "length": "2:19:33",
      "author": "freeCodeCamp.org",
      "description": "What is an API? Learn all about APIs (Application Programming Interfaces) in this full tutorial for beginners.",
      "url": "https://www.youtube.com/watch?v=GZvSYJDk-us",
      "thumbnail": "thumbnail20.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    21: {
      "title": "JS/API Project Demonstration",
      "length": "9:25:15",
      "author": "JavaScript Mastery",
      "description": "Build and Deploy 5 JavaScript & React API Projects in 10 Hours - Full Course | RapidAPI",
      "url": "https://www.youtube.com/watch?v=GDa8kZLNhJ4",
      "thumbnail": "thumbnail21.jpg",
      "likes": 0,
      "dislikes": 0,
    },
    
}

var courses = [];

function search() {
	let input = document.getElementById('search').value;
  let courselist = document.getElementById("recommended-list");
  let searchResults = document.getElementById("search-results");
  let resultsCount = 0;
	let inputLower = input.toLowerCase();

  	courselist.innerHTML = "";

	for (course of courses) {
		if (course.title.toLowerCase().includes(inputLower) ||
        course.author.toLowerCase().includes(inputLower) ||
        course.description.toLowerCase().includes(inputLower)) {
      courselist.innerHTML += course.generateHTML();
      getFavourited(course);
      getLiked(course);
      getDisliked(course);
      resultsCount += 1;
		}
	}

  searchResults.innerHTML = ""
  if (input.length > 0) {
    searchResults.innerHTML += `<h1 class="search-results-title">${resultsCount} results for ${input}</h1>`
  }
   //document.getElementById('search').value = "";
}


class Course {
	constructor(title, length, author, description, url, thumbnail, likes, dislikes) {
    this.title = title;
    this.length = length;
    this.author = author;
    this.description = description;
    this.url = url;
    this.thumbnail = thumbnail;
    this.likes = likes;
    this.dislikes = dislikes;
    this.favourite = false;
    this.liked = false;
    this.disliked = false;
    this.score = (likes - dislikes)
    this.like_id = "like" + thumbnail.split(".")[0];
    this.dislike_id = "dislike" + thumbnail.split(".")[0];
    this.favourite_id = "favourite" + thumbnail.split(".")[0];
    this.score_id = "score" + thumbnail.split(".")[0];
	}

  generateHTML() {
      return `
      <div class="course-item">
        <a href="${this.url}" target="_blank">         
        <img class="course-image" src="static/assets/thumbnails/${this.thumbnail}" alt="Thumbnail">
        </a>
        <div class="course-information">
          <t class="course-title">${this.title}</t>
          
          <br>
          Length: ${this.length}<br>
          By:
          <t class="author">${this.author}</t><br><br>
          <t>${this.description}</t>
          <br><br><br><br>
        </div>
        <div class="course-footer">
          <img class="rating" src="static/assets/images/like_default.png" onclick="like('${this.url}')" onmouseover="this.src='static/assets/images/like_filled.png'" onmouseout="this.src='static/assets/images/like_default.png'"/>
          <t id="rating1" class="rating-value">${this.score}</t>
          <img class="rating" src="static/assets/images/dislike_default.png" onclick="dislike('${this.url}')" onmouseover="this.src='static/assets/images/dislike_filled.png'" onmouseout="this.src='static/assets/images/dislike_default.png'"/>

          <p></p>

          <a class="learn-now" href="${this.url}" target="_blank">LEARN</a>
          <p></p>
          <img class="favourite" src="static/assets/images/star_default.png" onclick="togglefavourite('${this.url}')" onmouseover="this.src='static/assets/images/star_fill.png'" onmouseout="this.src='static/assets/images/star_default.png'" />
        </div>
      </div>
      <div class="course-footer">
        <img id="${this.like_id}" class="rating" src="static/assets/images/like_default.png" onclick="like('${this.url}')" onmouseover="enterLike('${this.url}')" onmouseout="leaveLike('${this.url}')"/>
        <t id="${this.score_id}" class="rating-value">${this.score}</t>
        <img id="${this.dislike_id}"class="rating" src="static/assets/images/dislike_default.png" onclick="dislike('${this.url}')" onmouseover="enterDislike('${this.url}')" onmouseout="leaveDislike('${this.url}')"/>

        <p></p>

        <a class="learn-now" href="${this.url}" target="_blank">LEARN</a>
        <p></p>
        <img id="${this.favourite_id}" class="favourite" src="static/assets/images/star_default.png" onclick="togglefavourite('${this.url}')" onmouseover="enterFavourite('${this.url}')" onmouseout="leaveFavourite('${this.url}')" />
      
      </div>
    </div>
    `;
  }
}

document.addEventListener("DOMContentLoaded", () => {
  try{
    document.querySelector("#search").addEventListener("keyup", event => {
      search();
    });
  }
  catch(e){

  }

  let courselist = document.getElementById("recommended-list");
  let html = document.getElementById("html")
  let favouritelist = document.getElementById("favourites-list");

  for (key in data) {
    let title = data[key].title;
    let length = data[key].length;
    let author = data[key].author;
    let description = data[key].description;
    let url = data[key].url;
    let thumbnail = data[key].thumbnail;
    let likes = data[key].likes;
    let dislikes = data[key].dislikes;

    let course = new Course(title, length, author, description, url, thumbnail, likes, dislikes);
    courses.push(course);
  }
  courses.sort(() => Math.random() - 0.5);

  for (course of courses) {
    try{
      courselist.innerHTML += course.generateHTML();
    }
    catch(e){
    }
  }

  console.log(favouriteCourse.length);
  for(course of courses){
    if(course.favourite === true){
      favouritelist.innerHTML += course.generateHTML();   
    }
  }

});

function togglefavourite(url){
  for (course of courses) {
    if (course.url === url){
      if(course.favourite === true){
        course.favourite = false;
        document.getElementById(course.favourite_id).src = "static/assets/images/star_default.png";
      }
      else {
        course.favourite = true;
        document.getElementById(course.favourite_id).src = "static/assets/images/star_fill.png";
      }
    }
  }
}

function enterFavourite(url) {
  for (course of courses) {
    if (course.url === url) {
      document.getElementById(course.favourite_id).src = "static/assets/images/star_fill.png";
      break;
    }
  }
}

function leaveFavourite(url) {
  for (course of courses) {
    if (course.url === url) {
      if (!course.favourite) {
        document.getElementById(course.favourite_id).src = "static/assets/images/star_default.png";
        break;
      }
    }
  }
}

function getFavourited(course) {
    if (course.favourite)
      document.getElementById(course.favourite_id).src = "static/assets/images/star_fill.png";
    else
      document.getElementById(course.favourite_id).src = "static/assets/images/star_default.png";
}

function like(url) {
	for (course of courses) {
		if (course.url === url) {
      if (course.liked) {
        document.getElementById(course.like_id).src = "static/assets/images/like_default.png";
  			course.likes -= 1;
  			course.score -= 1;
      }
      else if (!course.liked) {

        document.getElementById(course.like_id).src = "static/assets/images/like_filled.png";
        course.likes += 1;
        course.score += 1;
      }
      document.getElementById(course.score_id).innerHTML = course.score;
      course.liked = !course.liked;

		}
	}
}

function enterLike(url) {
  for (course of courses) {
    if (course.url === url) {
      document.getElementById(course.like_id).src = "static/assets/images/like_filled.png";
      break;
    }
  }
}

function leaveLike(url) {
  for (course of courses) {
    if (course.url === url) {
      if (!course.liked) {
        document.getElementById(course.like_id).src = "static/assets/images/like_default.png";
        break;
      }
    }
  }
}

function getLiked(course) {
    if (course.liked)
      document.getElementById(course.like_id).src = "static/assets/images/like_filled.png";
    else
      document.getElementById(course.like_id).src = "static/assets/images/like_default.png";
}

function dislike(url){
	for (course of courses) {
    if (course.url === url) {
      if (course.disliked) {
        document.getElementById(course.dislike_id).src = "static/assets/images/dislike_default.png";
        course.dislikes += 1;
        course.score += 1;
      }
      else if (!course.disliked) {
        document.getElementById(course.dislike_id).src = "static/assets/images/dislike_filled.png";
        course.likes -= 1;
        course.score -= 1;
      }
      document.getElementById(course.score_id).innerHTML = course.score;
      course.disliked = !course.disliked;

    }
  }
}

function enterDislike(url) {
  for (course of courses) {
    if (course.url === url) {
      document.getElementById(course.dislike_id).src = "static/assets/images/dislike_filled.png";
      break;
    }
  }
}

function leaveDislike(url) {
  for (course of courses) {
    if (course.url === url) {
      if (!course.disliked) {
        document.getElementById(course.dislike_id).src = "static/assets/images/dislike_default.png";
        break;
      }
    }
  }
}

function getDisliked(course) {
    if (course.disliked)
      document.getElementById(course.dislike_id).src = "static/assets/images/dislike_filled.png";
    else
      document.getElementById(course.dislike_id).src = "static/assets/images/dislike_default.png";
}

function update() {
	let courselist = document.getElementById("recommended-list");
  courselist.innerHTML = "";
	for (course of courses) {
   	courselist.innerHTML += course.generateHTML();
    getFavourited(course);
    getLiked(course);
    getDisliked(course);
	}
}